ruby:
  if image_right
    image_position = "order-lg-2"
    text_position = "order-lg-1"
  else
    image_position = "order-lg-1"
    text_position = "order-lg-2"
  end

.container
  .row.my-4
    .d-none.d-lg-block.align-self-center.col-lg-6.p-0 class="#{image_position}"
      = proxy_image_tag block.image.lqip_data_url(w: 10,
          h: 6,
          fit: "max"),
          data: {sizes: "100vw",
            src: block.image.url(w: 700,
                h: 400,
                fit: "max",
                auto: "compress"),
            srcset: "#{block.image.url(w: 450,
                h: 330,
                fit: 'max',
                auto: 'compress')} 480w,
              #{block.image.url(w: 600,
                h: 333,
                fit: 'max',
                auto: 'compress')} 632w,
              #{block.image.url(w: 560,
                h: 333,
                fit: 'max',
                auto: 'compress')} 844w,
              #{block.image.url(w: 700,
                h: 400,
                fit: 'max',
                auto: 'compress')} 1091w,
              #{block.image.url(w: 1400,
                h: 840,
                fit: 'max',
                auto: 'compress')} 1320w"},
          class: "lazyload d-block w-100",
          alt: block.image.alt

    .col-12.col-lg-6.px-0.align-self-center class="#{text_position}"
      .col-lg-10.offset-lg-2.px-0.py-lg-5
        .px-2.px-lg-0.pt-4.pt-lg-0.text-center.text-lg-left
          h2.h6.mid-text--large.text-uppercase.font-weight-semibold.p-lg-0
            = block.pre_title

          h3.d-lg-block.h2.pt-2.pb-3
            = block.title

          .mt-3.mt-lg-4.text-center.text-lg-left.pb-5.pb-lg-0.mb-3.mb-lg-0
            - html_class = "btn text-uppercase btn-primary"
            = partial "partials/links/#{block.link.item_type.api_key}",
              locals: {item: block.link, html_class: html_class}

    .col-12.d-lg-none.px-0
      .img-responsive-wrapper.p-0
        .img-responsive
          .img-wrapper
            figure.m-0
              = proxy_image_tag block.image.lqip_data_url(w: 10,
                h: 6,
                fit: "max"),
                data: {sizes: "100vw",
                  src: block.image.url(w: 560,
                    h: 320,
                    fit: "max",
                    auto: "compress"),
                  srcset: "#{block.image.url(w: 560,
                    h: 320,
                    fit: 'max',
                    auto: 'compress')} 480w"},
                class: "lazyload",
                alt: block.image.alt,
                title: block.image.title
